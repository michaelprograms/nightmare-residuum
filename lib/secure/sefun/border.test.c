inherit M_TEST;

object __MockCharacter;
object query_character () {
    return __MockCharacter;
}

private nosave string __ANSI = "on", __Screenreader = "off";
private nosave int __Width = 80;
mixed query_setting (string setting) {
    if (setting == "ansi") {
        return __ANSI;
    }
    if (setting == "width") {
        return __Width;
    }
    if (setting == "screenreader") {
        return __Screenreader;
    }
}

void test_character_colors () {
    __MockCharacter = new("/std/living.c");
    __MockCharacter->set_key_name("test"); // must be named test

    expect("colors are returned", (: ({
        assert_equal(testOb->query_character_border_colors(), ({ ({ 191, 63, 191 }), ({ 63, 191, 191 }) })),

        __MockCharacter->set_class("psionist"),
        assert_equal(testOb->query_character_border_colors(), ({ ({ 65, 105, 225 }), ({ 192, 192, 192 }) })),
    }) :));
}

void test_border_charset () {
    expect("border_charset is returned", (: ({
        assert_equal(testOb->query_border_charset()["h"],  "â”€"),

        __Screenreader = "on",
        assert_equal(testOb->query_border_charset()["h"], " "),
        __Screenreader = "off",
    }) :));
}

void test_format_border_item () {
    expect("border header is formatted", (: ({
        assert_equal(testOb->format_border_item(([ "header": ({ "Header1", "Header2" }), "columns": 2 ]), "256", "L", "R"), ({ "L  %^RESET%^BOLD%^UNDERLINE%^Header1%^RESET%^                             %^RESET%^BOLD%^UNDERLINE%^Header2%^RESET%^                               R" })),
        assert_equal(testOb->format_border_item(([ "header": ({ "A123456789", "B123456789", "C123456789", "D123456789", "E123456789", "F123456789", "G123456789", "H123456789", "I123456789", "J123456789", "K123456789", "L123456789" }), "columns": 10 ]), "256", "L", "R"), ({ "L  A123456B123456C123456D123456E123456F123456G123456H123456I123456J123456    R" })),
    }) :));
    expect("border item is formatted", (: ({
        assert_equal(__Width = 20, 20),
        assert_equal(testOb->format_border_item(([ "items": ({ "1", "2", "3", }) ]), "256", "L", "R"), ({  "L  1     2       R", "L  3             R" })),

        assert_equal(__Width = 40, 40),
        assert_equal(testOb->format_border_item(([ "items": ({ "1", "2", "3", }) ]), "256", "L", "R"), ({ "L  1               2                 R", "L  3                                 R" })),
    }) :));
}

void test_format_border () {
    mapping b = testOb->query_border_charset();
    mapping dataTitle = ([
        "title": "TITLE",
        "subtitle": "subtitle"
    ]);
    mapping dataHeader = ([
        "header": ({
            ([
                "header": ({ "Header Header 1", "Header Header 2" }),
                "items": ({ "Header Item 1", "Header Item 2", "Header Item 3", }),
            ]),
            ([
                "header": ({ "Header Header 1", "Header Header 2" }),
                "items": ({ "Header Item 1", "Header Item 2", "Header Item 3", }),
            ]),
        })
    ]);

    expect("border is formatted", (: ({
        assert_equal(__Width, 40),

        // Empty
        assert_equal(testOb->format_border(([]), $(b), __Width, 0), ({
            "â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
            "â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯"
        })),
        assert_equal(testOb->format_border(([]), $(b), __Width, "16"), ({
            "\e[36mâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\e[0;37;40m",
            "\e[36mâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\e[0;37;40m"
        })),
        assert_equal(testOb->format_border(([]), $(b), __Width, "256"), ({
            "\e[38;2;64;106;229mâ•­\e[38;2;71;109;227mâ”€\e[38;2;78;112;225mâ”€\e[38;2;83;115;223mâ”€\e[38;2;88;117;221mâ”€\e[38;2;93;120;219mâ”€\e[38;2;97;122;218mâ”€\e[38;2;101;124;216mâ”€\e[38;2;105;126;214mâ”€\e[38;2;109;128;213mâ”€\e[38;2;112;130;211mâ”€\e[38;2;115;132;210mâ”€\e[38;2;118;134;208mâ”€\e[38;2;121;136;206mâ”€\e[38;2;124;138;205mâ”€\e[38;2;127;140;203mâ”€\e[38;2;129;141;202mâ”€\e[38;2;132;143;200mâ”€\e[38;2;134;144;199mâ”€\e[38;2;136;146;197mâ”€\e[38;2;138;148;196mâ”€\e[38;2;141;149;195mâ”€\e[38;2;143;150;193mâ”€\e[38;2;145;152;192mâ”€\e[38;2;147;153;190mâ”€\e[38;2;149;155;189mâ”€\e[38;2;150;156;188mâ”€\e[38;2;152;157;186mâ”€\e[38;2;154;158;185mâ”€\e[38;2;156;160;184mâ”€\e[38;2;157;161;182mâ”€\e[38;2;159;162;181mâ”€\e[38;2;161;163;180mâ”€\e[38;2;162;165;179mâ”€\e[38;2;164;166;177mâ”€\e[38;2;165;167;176mâ”€\e[38;2;167;168;175mâ”€\e[38;2;168;169;174mâ”€\e[38;2;170;170;172mâ”€\e[38;2;171;171;171mâ•®\e[0;37;40m",
            "\e[38;2;171;171;171mâ•°\e[38;2;170;170;172mâ”€\e[38;2;168;169;174mâ”€\e[38;2;167;168;175mâ”€\e[38;2;165;167;176mâ”€\e[38;2;164;166;177mâ”€\e[38;2;162;165;179mâ”€\e[38;2;161;163;180mâ”€\e[38;2;159;162;181mâ”€\e[38;2;157;161;182mâ”€\e[38;2;156;160;184mâ”€\e[38;2;154;158;185mâ”€\e[38;2;152;157;186mâ”€\e[38;2;150;156;188mâ”€\e[38;2;149;155;189mâ”€\e[38;2;147;153;190mâ”€\e[38;2;145;152;192mâ”€\e[38;2;143;150;193mâ”€\e[38;2;141;149;195mâ”€\e[38;2;138;148;196mâ”€\e[38;2;136;146;197mâ”€\e[38;2;134;144;199mâ”€\e[38;2;132;143;200mâ”€\e[38;2;129;141;202mâ”€\e[38;2;127;140;203mâ”€\e[38;2;124;138;205mâ”€\e[38;2;121;136;206mâ”€\e[38;2;118;134;208mâ”€\e[38;2;115;132;210mâ”€\e[38;2;112;130;211mâ”€\e[38;2;109;128;213mâ”€\e[38;2;105;126;214mâ”€\e[38;2;101;124;216mâ”€\e[38;2;97;122;218mâ”€\e[38;2;93;120;219mâ”€\e[38;2;88;117;221mâ”€\e[38;2;83;115;223mâ”€\e[38;2;78;112;225mâ”€\e[38;2;71;109;227mâ”€\e[38;2;64;106;229mâ•¯\e[0;37;40m"
        })),

        // Title
        assert_equal(testOb->format_border($(dataTitle), $(b), __Width, 0), ({
            "   â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
            "â•­â”€â”€â”¤ TITLE: subtitle â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
            "â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                 â”‚",
            "â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯"
        })),
        assert_equal(testOb->format_border($(dataTitle), $(b), __Width, "16"), ({
            "   \e[36mâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\e[0;37;40m",
            "\e[36mâ•­â”€â”€â”¤ \e[0;37;40;1mTITLE: subtitle\e[22;36m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\e[0;37;40m",
            "\e[36mâ”‚\e[0;37;40m  \e[36mâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\e[0;37;40m                 \e[36mâ”‚\e[0;37;40m",
            "\e[36mâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\e[0;37;40m"
        })),
        assert_equal(testOb->format_border($(dataTitle), $(b), __Width, "256"), ({
            "   \e[38;2;64;106;229mâ•­\e[38;2;71;109;227mâ”€\e[38;2;78;112;225mâ”€\e[38;2;83;115;223mâ”€\e[38;2;88;117;221mâ”€\e[38;2;93;120;219mâ”€\e[38;2;97;122;218mâ”€\e[38;2;101;124;216mâ”€\e[38;2;105;126;214mâ”€\e[38;2;109;128;213mâ”€\e[38;2;112;130;211mâ”€\e[38;2;115;132;210mâ”€\e[38;2;118;134;208mâ”€\e[38;2;121;136;206mâ”€\e[38;2;124;138;205mâ”€\e[38;2;127;140;203mâ”€\e[38;2;129;141;202mâ”€\e[38;2;132;143;200mâ”€\e[38;2;134;144;199mâ•®\e[0;37;40m",
            "\e[38;2;64;106;229mâ•­\e[38;2;71;109;227mâ”€\e[38;2;78;112;225mâ”€\e[38;2;83;115;223mâ”¤\e[0;37;40m\e[0;37;40;1m TITLE:\e[22m subtitle \e[38;2;141;149;195mâ”œ\e[38;2;143;150;193mâ”€\e[38;2;145;152;192mâ”€\e[38;2;147;153;190mâ”€\e[38;2;149;155;189mâ”€\e[38;2;150;156;188mâ”€\e[38;2;152;157;186mâ”€\e[38;2;154;158;185mâ”€\e[38;2;156;160;184mâ”€\e[38;2;157;161;182mâ”€\e[38;2;159;162;181mâ”€\e[38;2;161;163;180mâ”€\e[38;2;162;165;179mâ”€\e[38;2;164;166;177mâ”€\e[38;2;165;167;176mâ”€\e[38;2;167;168;175mâ”€\e[38;2;168;169;174mâ”€\e[38;2;170;170;172mâ”€\e[38;2;171;171;171mâ•®\e[0;37;40m",
            "\e[38;2;64;106;229mâ”‚\e[0;37;40m  \e[38;2;83;115;223mâ•°\e[38;2;88;117;221mâ”€\e[38;2;93;120;219mâ”€\e[38;2;97;122;218mâ”€\e[38;2;101;124;216mâ”€\e[38;2;105;126;214mâ”€\e[38;2;109;128;213mâ”€\e[38;2;112;130;211mâ”€\e[38;2;115;132;210mâ”€\e[38;2;118;134;208mâ”€\e[38;2;121;136;206mâ”€\e[38;2;124;138;205mâ”€\e[38;2;127;140;203mâ”€\e[38;2;129;141;202mâ”€\e[38;2;132;143;200mâ”€\e[38;2;134;144;199mâ”€\e[38;2;136;146;197mâ”€\e[38;2;138;148;196mâ”€\e[38;2;141;149;195mâ•¯\e[0;37;40m                 0",
            "\e[38;2;171;171;171mâ•°\e[38;2;170;170;172mâ”€\e[38;2;168;169;174mâ”€\e[38;2;167;168;175mâ”€\e[38;2;165;167;176mâ”€\e[38;2;164;166;177mâ”€\e[38;2;162;165;179mâ”€\e[38;2;161;163;180mâ”€\e[38;2;159;162;181mâ”€\e[38;2;157;161;182mâ”€\e[38;2;156;160;184mâ”€\e[38;2;154;158;185mâ”€\e[38;2;152;157;186mâ”€\e[38;2;150;156;188mâ”€\e[38;2;149;155;189mâ”€\e[38;2;147;153;190mâ”€\e[38;2;145;152;192mâ”€\e[38;2;143;150;193mâ”€\e[38;2;141;149;195mâ”€\e[38;2;138;148;196mâ”€\e[38;2;136;146;197mâ”€\e[38;2;134;144;199mâ”€\e[38;2;132;143;200mâ”€\e[38;2;129;141;202mâ”€\e[38;2;127;140;203mâ”€\e[38;2;124;138;205mâ”€\e[38;2;121;136;206mâ”€\e[38;2;118;134;208mâ”€\e[38;2;115;132;210mâ”€\e[38;2;112;130;211mâ”€\e[38;2;109;128;213mâ”€\e[38;2;105;126;214mâ”€\e[38;2;101;124;216mâ”€\e[38;2;97;122;218mâ”€\e[38;2;93;120;219mâ”€\e[38;2;88;117;221mâ”€\e[38;2;83;115;223mâ”€\e[38;2;78;112;225mâ”€\e[38;2;71;109;227mâ”€\e[38;2;64;106;229mâ•¯\e[0;37;40m"
        })),

        // Header
        assert_equal(testOb->format_border(([ "header": $(dataHeader)["header"][0] ]), $(b), __Width, 0), ({
            "â•­â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â•®",
            "â”‚â”‚  Header Header 1 Header Header 2   â”‚â”‚",
            "â”‚â”‚  Header Item 1   Header Item 2     â”‚â”‚",
            "â”‚â”‚  Header Item 3                     â”‚â”‚",
            "â”‚â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯â”‚",
            "â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯"
        })),
        assert_equal(testOb->format_border($(dataHeader), $(b), __Width, 0), ({
            "â•­â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â•®",
            "â”‚â”‚  Header Header 1 Header Header 2   â”‚â”‚",
            "â”‚â”‚  Header Item 1   Header Item 2     â”‚â”‚",
            "â”‚â”‚  Header Item 3                     â”‚â”‚",
            "â”‚â”‚                                    â”‚â”‚",
            "â”‚â”‚  Header Header 1 Header Header 2   â”‚â”‚",
            "â”‚â”‚  Header Item 1   Header Item 2     â”‚â”‚",
            "â”‚â”‚  Header Item 3                     â”‚â”‚",
            "â”‚â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯â”‚",
            "â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯"
        })),
        write("NOPE\n"),
        assert_equal(testOb->format_border($(dataHeader), $(b), __Width, "16"), ({
            "[36mâ•­â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â•®[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  %^RESET%^BOLD%^UNDERLINE%^Header Header 1%^RESET%^ %^RESET%^BOLD%^UNDERLINE%^Header Header 2%^RESET%^   [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  Header Item 1   Header Item 2     [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  Header Item 3                     [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m                                    [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  %^RESET%^BOLD%^UNDERLINE%^Header Header 1%^RESET%^ %^RESET%^BOLD%^UNDERLINE%^Header Header 2%^RESET%^   [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  Header Item 1   Header Item 2     [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â”‚[0;37;40m  Header Item 3                     [36mâ”‚â”‚[0;37;40m",
            "[36mâ”‚â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯â”‚[0;37;40m",
            "[36mâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯[0;37;40m",
        })),
        assert_equal(testOb->format_border($(dataHeader), $(b), __Width, "256"), ({
            "\e[38;2;64;106;229mâ•­\e[38;2;71;109;227mâ”¬\e[38;2;78;112;225mâ”€\e[38;2;83;115;223mâ”€\e[38;2;88;117;221mâ”€\e[38;2;93;120;219mâ”€\e[38;2;97;122;218mâ”€\e[38;2;101;124;216mâ”€\e[38;2;105;126;214mâ”€\e[38;2;109;128;213mâ”€\e[38;2;112;130;211mâ”€\e[38;2;115;132;210mâ”€\e[38;2;118;134;208mâ”€\e[38;2;121;136;206mâ”€\e[38;2;124;138;205mâ”€\e[38;2;127;140;203mâ”€\e[38;2;129;141;202mâ”€\e[38;2;132;143;200mâ”€\e[38;2;134;144;199mâ”€\e[38;2;136;146;197mâ”€\e[38;2;138;148;196mâ”€\e[38;2;141;149;195mâ”€\e[38;2;143;150;193mâ”€\e[38;2;145;152;192mâ”€\e[38;2;147;153;190mâ”€\e[38;2;149;155;189mâ”€\e[38;2;150;156;188mâ”€\e[38;2;152;157;186mâ”€\e[38;2;154;158;185mâ”€\e[38;2;156;160;184mâ”€\e[38;2;157;161;182mâ”€\e[38;2;159;162;181mâ”€\e[38;2;161;163;180mâ”€\e[38;2;162;165;179mâ”€\e[38;2;164;166;177mâ”€\e[38;2;165;167;176mâ”€\e[38;2;167;168;175mâ”€\e[38;2;168;169;174mâ”€\e[38;2;170;170;172mâ”¬\e[38;2;171;171;171mâ•®\e[0;37;40m",
            "\e[38;2;90;118;221mâ”‚â”‚\e[0;37;40m  %^RESET%^BOLD%^UNDERLINE%^Header Header 1%^RESET%^ %^RESET%^BOLD%^UNDERLINE%^Header Header 2%^RESET%^   \e[38;2;165;166;177mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;107;128;213mâ”‚â”‚\e[0;37;40m  Header Item 1   Header Item 2     \e[38;2;158;161;182mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;121;136;206mâ”‚â”‚\e[0;37;40m  Header Item 3                     \e[38;2;150;156;188mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;132;143;200mâ”‚â”‚\e[0;37;40m                                    \e[38;2;142;150;194mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;142;150;194mâ”‚â”‚\e[0;37;40m  %^RESET%^BOLD%^UNDERLINE%^Header Header 1%^RESET%^ %^RESET%^BOLD%^UNDERLINE%^Header Header 2%^RESET%^   \e[38;2;132;143;200mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;150;156;188mâ”‚â”‚\e[0;37;40m  Header Item 1   Header Item 2     \e[38;2;121;136;206mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;158;161;182mâ”‚â”‚\e[0;37;40m  Header Item 3                     \e[38;2;107;128;213mâ”‚â”‚\e[0;37;40m",
            "\e[38;2;158;158;169mâ”‚\e[38;2;157;157;171mâ•°\e[38;2;156;157;172mâ”€\e[38;2;155;156;173mâ”€\e[38;2;153;155;175mâ”€\e[38;2;152;154;176mâ”€\e[38;2;151;153;178mâ”€\e[38;2;149;152;179mâ”€\e[38;2;148;152;180mâ”€\e[38;2;147;151;182mâ”€\e[38;2;145;150;183mâ”€\e[38;2;144;149;184mâ”€\e[38;2;143;148;186mâ”€\e[38;2;141;147;187mâ”€\e[38;2;140;146;188mâ”€\e[38;2;138;145;190mâ”€\e[38;2;137;144;191mâ”€\e[38;2;135;143;192mâ”€\e[38;2;133;142;194mâ”€\e[38;2;132;141;195mâ”€\e[38;2;130;140;196mâ”€\e[38;2;129;139;198mâ”€\e[38;2;127;138;199mâ”€\e[38;2;125;137;200mâ”€\e[38;2;123;136;202mâ”€\e[38;2;121;135;203mâ”€\e[38;2;119;134;204mâ”€\e[38;2;118;133;206mâ”€\e[38;2;116;132;207mâ”€\e[38;2;113;130;208mâ”€\e[38;2;111;129;209mâ”€\e[38;2;109;128;211mâ”€\e[38;2;107;127;212mâ”€\e[38;2;105;126;213mâ”€\e[38;2;102;124;215mâ”€\e[38;2;100;123;216mâ”€\e[38;2;97;122;217mâ”€\e[38;2;95;120;218mâ”€\e[38;2;92;119;220mâ•¯\e[38;2;89;118;221mâ”‚\e[0;37;40m",
            "\e[38;2;171;171;171mâ•°\e[38;2;170;170;172mâ”€\e[38;2;168;169;174mâ”€\e[38;2;167;168;175mâ”€\e[38;2;165;167;176mâ”€\e[38;2;164;166;177mâ”€\e[38;2;162;165;179mâ”€\e[38;2;161;163;180mâ”€\e[38;2;159;162;181mâ”€\e[38;2;157;161;182mâ”€\e[38;2;156;160;184mâ”€\e[38;2;154;158;185mâ”€\e[38;2;152;157;186mâ”€\e[38;2;150;156;188mâ”€\e[38;2;149;155;189mâ”€\e[38;2;147;153;190mâ”€\e[38;2;145;152;192mâ”€\e[38;2;143;150;193mâ”€\e[38;2;141;149;195mâ”€\e[38;2;138;148;196mâ”€\e[38;2;136;146;197mâ”€\e[38;2;134;144;199mâ”€\e[38;2;132;143;200mâ”€\e[38;2;129;141;202mâ”€\e[38;2;127;140;203mâ”€\e[38;2;124;138;205mâ”€\e[38;2;121;136;206mâ”€\e[38;2;118;134;208mâ”€\e[38;2;115;132;210mâ”€\e[38;2;112;130;211mâ”€\e[38;2;109;128;213mâ”€\e[38;2;105;126;214mâ”€\e[38;2;101;124;216mâ”€\e[38;2;97;122;218mâ”€\e[38;2;93;120;219mâ”€\e[38;2;88;117;221mâ”€\e[38;2;83;115;223mâ”€\e[38;2;78;112;225mâ”€\e[38;2;71;109;227mâ”€\e[38;2;64;106;229mâ•¯\e[0;37;40m",
        })),

        // Body

        // Footer

        // Border Colors
    }) :));
}

/*


*/

void test_tree () {
    expect("tree behaves", (: ({
        assert_equal(testOb->tree(([ "00": "abcdefghi", "01": "abcdefghi" ])), ({ "0. 00abcdefghi", "1. 01abcdefghi" })),
        assert_equal(testOb->tree(([ "A": ([ "1": ([ "a": ([ ]), "b": ([ ]) ]), "2": ([ ]), ]), "B": ([ ]), "C": ([ "1": ([ ]), "2": ([ "a": ([ ]), "b": ([ ]) ]) ]) ]), ), ({  "0. A", "â”œâ”€0. 1", "â”‚ â”œâ”€0. a", "â”‚ â””â”€1. b", "â””â”€1. 2", "1. B", "2. C", "â”œâ”€0. 1", "â””â”€1. 2", "  â”œâ”€0. a", "  â””â”€1. b" })),

        assert_catch((: testOb->tree(UNDEFINED) :), "*Bad argument 1 to border->tree\n"),
    }) :));
}